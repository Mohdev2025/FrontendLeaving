<div class="container-fluid">
  <div class="row">

    <!-- Sidebar -->
    <div class="col-md-3 bg-light vh-100 p-3 position-sticky top-0">
      <div class="text-center mb-4">
        <img [src]="employee.photo" class="rounded-circle mb-2" width="120" height="120" alt="Employee Photo">
        <h5>{{ employee.name }}</h5>
        <p class="text-muted">{{ employee.position || '—' }}</p>
        <p class="text-muted">{{ employee.department || '—' }}</p>
        <p class="text-muted">{{ employee.contract }}</p>
      </div>

      <ul class="nav nav-pills flex-column" role="tablist">
        <li class="nav-item mb-2">
          <button class="nav-link" [class.active]="activeTab() === 'apply'" (click)="selectTab('apply')">
            📋 Apply Leave
          </button>
        </li>

        <li class="nav-item mb-2">
          <button class="nav-link" [class.active]="activeTab() === 'permission'" (click)="selectTab('permission')">
            ⏰ Apply Permission
          </button>
        </li>

        <li class="nav-item mb-2">
          <button class="nav-link" [class.active]="activeTab() === 'history'" (click)="selectTab('history')">
            📜 Leave History
          </button>
        </li>

        <!-- Manager tab: only visible if user is manager -->
        <li class="nav-item mb-2" *ngIf="isManager">
          <button class="nav-link" [class.active]="activeTab() === 'manager'" (click)="selectTab('manager')">
            🧑‍💼 Manager Requests
          </button>
        </li>

        <li class="nav-item mt-4">
          <button class="btn btn-danger w-100" (click)="logout()">
            🚪 Logout
          </button>
        </li>
      </ul>
    </div>

    <!-- Main Content -->
    <div class="col-md-9 p-3">
      <div *ngIf="activeTab() === 'apply'">
        <app-leave-apply (leaveApplied)="addLeave($event)"></app-leave-apply>
      </div>

      <div *ngIf="activeTab() === 'permission'">
        <app-permission-apply (permissionApplied)="addPermission($event)"></app-permission-apply>
      </div>

      <div *ngIf="activeTab() === 'history'">
        <app-leave-history *ngIf="activeTab() === 'history'" [userId]="userId"></app-leave-history>
      </div>

      <div *ngIf="activeTab() === 'manager' && isManager">
        <app-manager-requests></app-manager-requests>
      </div>
    </div>

  </div>
</div>
